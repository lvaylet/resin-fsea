version: '3'
services:
  mqtt-broker:
    image: eclipse-mosquitto:1.4.12
    expose:
      - "1883"  # default listener
      - "9001"  # websockets listener

  dashboard:
    build: ./dashboard
    ports:
      - "8080:8080"
    depends_on:
      - mqtt-broker  # wait for MQTT broker to be started

  drone:
    build: ./drone
    depends_on:
      - mqtt-broker  # wait for MQTT broker to be started
    environment:
      - UUID=7ebf7ece-1332-44ad-8f3a-db72245eded5  # generated with https://www.uuidgenerator.net/
      - NAME=drone1
